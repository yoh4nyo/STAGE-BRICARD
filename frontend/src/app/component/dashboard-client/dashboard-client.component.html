<!-- === CONTENU EXISTANT DU DASHBOARD CLIENT === -->
<div class="client-dashboard-page">
  <!-- En-tête orange -->
  <header class="dashboard-header">
    <span class="header-title">Mes projets</span>
    <span class="header-icon logout-icon" (click)="logout()" title="Déconnexion" role="button" tabindex="0">
      ➡
    </span>
  </header>

  <!-- Contenu principal -->
  <main class="dashboard-content">
    <!-- Bouton qui OUVRE la modale -->
    <button class="btn create-project-btn" (click)="openModal()">
      CRÉER UN PROJET
    </button>
  </main>
</div>
<!-- === FIN DU CONTENU EXISTANT === -->


<!-- === NOUVELLE STRUCTURE POUR LA MODALE === -->
<div class="modal-backdrop" *ngIf="isModalOpen" (click)="closeModal()"></div>

<div class="modal-container" *ngIf="isModalOpen">
  <div class="modal-content">
    <h2 class="modal-title">Nouveau projet</h2>

    <!-- Formulaire de création -->
    <!-- Utiliser ngSubmit pour appeler la méthode de soumission -->
    <form (ngSubmit)="submitProject()" #projectForm="ngForm">
      <div class="form-grid">

        <!-- Champ Nom du projet -->
        <div class="form-group">
          <label for="projectName">Nom du projet</label>
          <input type="text"
                 id="projectName"
                 name="projectName"
                 class="form-control"
                 placeholder="Entrez le nom du projet"
                 [(ngModel)]="newProject.name"
                 required>
          <!-- Optionnel: Afficher message d'erreur si invalide après soumission tentative -->
          <!-- <div *ngIf="projectForm.submitted && projectNameInput.invalid" class="invalid-feedback">Nom requis</div> -->
        </div>

        <!-- Champ Type d'organigramme -->
        <div class="form-group">
          <label for="projectType">Choix du type d'organigramme</label>
          <select id="projectType"
                  name="projectType"
                  class="form-control"
                  [(ngModel)]="newProject.type"
                  required>
            <option value="" disabled selected>Type d'organigramme</option>
            <option value="hierarchique">PG</option>
            <option value="matriciel">IM</option>
            <option value="plat">PG+IM</option>
            <!-- Ajoutez d'autres types ici -->
          </select>
        </div>

        <!-- Champ Date de création -->
        <div class="form-group">
            <label for="creationDate">Date de création</label>
            <div class="date-input-wrapper">
                <!-- Utiliser input type="date" est sémantiquement mieux, mais peut différer visuellement -->
                <!-- <input type="date" id="creationDate" name="creationDate" class="form-control" [(ngModel)]="newProject.creationDate" required> -->

                <!-- Alternative avec input text pour correspondre au placeholder JJ/MM/AAAA + icône -->
                <input type="text"
                       id="creationDate"
                       name="creationDate"
                       class="form-control date-input"
                       placeholder="JJ/MM/AAAA"
                       [(ngModel)]="newProject.creationDate"
                       required
                       (focus)="showDatePicker = true"
                       (blur)="hideDatePicker()"> <!-- Simple gestion pour l'exemple -->
                <span class="calendar-icon"></span> <!-- Icône calendrier Unicode -->
                <!-- Ici on pourrait ajouter un vrai date picker component si besoin -->
            </div>
        </div>


        <!-- Champ Niveau de sécurité -->
        <div class="form-group">
          <label for="securityLevel">Niveau de sécurité</label>
          <select id="securityLevel"
                  name="securityLevel"
                  class="form-control"
                  [(ngModel)]="newProject.securityLevel"
                  required>
            <option value="" disabled selected>Niveau de sécurité</option>
            <option value="bas">/</option>
            <option value="moyen">/</option>
            <option value="eleve">/</option>
            <!-- Ajoutez d'autres niveaux ici -->
          </select>
        </div>

      </div> <!-- Fin form-grid -->

      <!-- Bouton de soumission -->
      <div class="form-actions">
        <button type="submit" class="btn submit-project-btn" [disabled]="!projectForm.form.valid || isSubmitting">
           {{ isSubmitting ? 'Création...' : 'Démarrer le projet' }}
        </button>
      </div>

    </form> <!-- Fin du formulaire -->

    <!-- Optionnel: bouton pour fermer explicitement -->
    <button class="close-modal-btn" (click)="closeModal()" title="Fermer">×</button>

  </div> <!-- Fin modal-content -->
</div> <!-- Fin modal-container -->